<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>How Scoring Works ‚Äî Dogpatch Boulders</title>
    <style>
        :root {
            --text: #2c3e50;
            --text-light: #555;
            --text-muted: #999;
            --accent: #2980b9;
            --accent-hover: #1c5980;
            --bg: #f4f4f9;
            --surface: #fff;
            --border: #e8e8ee;
            --code-bg: #f8f9fa;
            --green: #27ae60;
            --red: #c0392b;
            --orange: #e67e22;
            --purple: #8e44ad;
            --blue: #2980b9;
            --shadow: rgba(0, 0, 0, 0.08);
            --bar-track: #f0f0f5;
            --tldr-bg: linear-gradient(135deg, #f0f7ff 0%, #e8f4fd 100%);
            --tldr-border: #d0e3f0;
            --winner-bg: #f0faf4;
            --callout-blue-bg: #f0f7ff;
            --callout-green-bg: #f0faf4;
            --callout-orange-bg: #fef8f0;
            --flow-purple-bg: #f5f0ff;
            --flow-purple-border: #c9b1e8;
            --flow-blue-bg: #f0f7ff;
            --flow-blue-border: #b0d0ee;
            --flow-green-bg: #f0faf4;
            --flow-green-border: #a8dfc0;
            --adjust-base-bg: #f0f0f5;
            --adjust-up-bg: #f0faf4;
            --adjust-up-border: #a8dfc0;
            --adjust-down-bg: #fef0f0;
            --adjust-down-border: #f0b0b0;
            --adjust-result-bg: #f0f7ff;
            --icon-bg-blue: #f0f7ff;
            --icon-bg-green: #f0faf4;
            --icon-bg-orange: #fef8f0;
            --icon-bg-purple: #f5f0ff;
            --icon-bg-red: #fef0f0;
            --icon-bg-neutral: #f0f0f5;
            --new-badge-bg: #fff3cd;
            --footer-link: #777;
        }

        [data-theme="dark"] {
            --text: #e0e0e8;
            --text-light: #aaaabc;
            --text-muted: #777788;
            --accent: #5dade2;
            --accent-hover: #85c1e9;
            --bg: #1a1a2e;
            --surface: #16213e;
            --border: #2a2a40;
            --code-bg: #1e1e38;
            --green: #2ecc71;
            --red: #e74c3c;
            --orange: #f5b041;
            --purple: #bb8fce;
            --blue: #5dade2;
            --shadow: rgba(0, 0, 0, 0.4);
            --bar-track: #1e1e38;
            --tldr-bg: linear-gradient(135deg, #162840 0%, #1a2a40 100%);
            --tldr-border: #2a3a55;
            --winner-bg: #1a3328;
            --callout-blue-bg: #162840;
            --callout-green-bg: #1a3328;
            --callout-orange-bg: #2e2218;
            --flow-purple-bg: #251a38;
            --flow-purple-border: #5a3578;
            --flow-blue-bg: #162840;
            --flow-blue-border: #2a4a68;
            --flow-green-bg: #1a3328;
            --flow-green-border: #2a5540;
            --adjust-base-bg: #1e1e38;
            --adjust-up-bg: #1a3328;
            --adjust-up-border: #2a5540;
            --adjust-down-bg: #3d1a1a;
            --adjust-down-border: #5a2a2a;
            --adjust-result-bg: #162840;
            --icon-bg-blue: #162840;
            --icon-bg-green: #1a3328;
            --icon-bg-orange: #2e2218;
            --icon-bg-purple: #251a38;
            --icon-bg-red: #3d1a1a;
            --icon-bg-neutral: #1e1e38;
            --new-badge-bg: #3d3520;
            --footer-link: #888899;
        }

        * {
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background: var(--bg);
            color: var(--text);
            margin: 0;
            padding: 20px;
            line-height: 1.7;
            -webkit-font-smoothing: antialiased;
            transition: background 0.3s, color 0.3s;
        }

        .container {
            max-width: 760px;
            margin: 0 auto;
            background: var(--surface);
            padding: 48px 40px;
            border-radius: 12px;
            box-shadow: 0 2px 16px var(--shadow);
            transition: background 0.3s;
            position: relative;
        }

        /* Theme Toggle */
        .theme-toggle {
            position: absolute;
            top: 16px;
            right: 16px;
            background: none;
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 6px 10px;
            font-size: 1.1em;
            cursor: pointer;
            line-height: 1;
            transition: border-color 0.2s;
            z-index: 2;
        }

        .theme-toggle:hover {
            border-color: var(--accent);
        }

        /* Navigation */
        .back-link {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            font-size: 0.85em;
            color: var(--accent);
            text-decoration: none;
            margin-bottom: 32px;
        }

        .back-link:hover {
            color: var(--accent-hover);
        }

        .back-link svg {
            width: 14px;
            height: 14px;
        }

        /* Typography */
        h1 {
            font-size: 1.8em;
            font-weight: 700;
            color: var(--text);
            margin: 0 0 8px 0;
            letter-spacing: -0.02em;
        }

        .page-subtitle {
            color: var(--text-light);
            font-size: 1em;
            margin: 0 0 40px 0;
            line-height: 1.6;
        }

        h2 {
            font-size: 1.25em;
            font-weight: 700;
            color: var(--text);
            margin: 48px 0 16px 0;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        h2 .icon {
            font-size: 1.2em;
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 10px;
            flex-shrink: 0;
        }

        h3 {
            font-size: 1em;
            font-weight: 600;
            color: var(--text);
            margin: 28px 0 10px 0;
        }

        p, li {
            color: var(--text-light);
            font-size: 0.94em;
            margin: 0 0 14px 0;
        }

        /* TLDR Box */
        .tldr {
            background: var(--tldr-bg);
            border: 1px solid var(--tldr-border);
            border-radius: 10px;
            padding: 24px 28px;
            margin: 0 0 40px 0;
        }

        .tldr h3 {
            margin: 0 0 12px 0;
            font-size: 0.9em;
            text-transform: uppercase;
            letter-spacing: 0.06em;
            color: var(--accent);
        }

        .tldr ol {
            margin: 0;
            padding-left: 20px;
        }

        .tldr li {
            margin-bottom: 6px;
            color: var(--text);
            font-size: 0.92em;
        }

        .tldr li strong {
            color: var(--accent);
        }

        /* Section cards */
        .section {
            margin-bottom: 48px;
        }

        /* Scenario comparison blocks */
        .versus {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            margin: 20px 0;
        }

        .versus-card {
            border-radius: 10px;
            padding: 20px;
            border: 1px solid var(--border);
        }

        .versus-card.winner {
            border-color: var(--green);
            background: var(--winner-bg);
        }

        .versus-card .label {
            font-size: 0.78em;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.06em;
            margin-bottom: 6px;
        }

        .versus-card.winner .label {
            color: var(--green);
        }

        .versus-card .climber-name {
            font-weight: 700;
            font-size: 1em;
            color: var(--text);
            margin-bottom: 4px;
        }

        .versus-card .climber-detail {
            font-size: 0.85em;
            color: var(--text-muted);
            margin-bottom: 12px;
        }

        .versus-card .score-display {
            font-family: "SF Mono", "Fira Code", Menlo, Consolas, monospace;
            font-size: 1.6em;
            font-weight: 700;
            color: var(--text);
        }

        .versus-card.winner .score-display {
            color: var(--green);
        }

        /* Bar chart */
        .bar-chart {
            margin: 20px 0;
        }

        .bar-row {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            gap: 12px;
        }

        .bar-label {
            width: 140px;
            text-align: right;
            font-size: 0.82em;
            color: var(--text-light);
            flex-shrink: 0;
            line-height: 1.3;
        }

        .bar-track {
            flex: 1;
            height: 32px;
            background: var(--bar-track);
            border-radius: 6px;
            position: relative;
            overflow: hidden;
        }

        .bar-fill {
            height: 100%;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 10px;
            font-size: 0.78em;
            font-weight: 700;
            color: white;
            transition: width 0.5s ease;
            min-width: 50px;
        }

        .bar-value {
            width: 55px;
            text-align: left;
            font-family: "SF Mono", "Fira Code", Menlo, Consolas, monospace;
            font-size: 0.82em;
            font-weight: 600;
            color: var(--text);
            flex-shrink: 0;
        }

        /* Weight visualization */
        .weight-stack {
            margin: 20px 0;
        }

        .weight-row {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 8px;
        }

        .weight-rank {
            width: 32px;
            font-size: 0.8em;
            font-weight: 600;
            color: var(--text-muted);
            text-align: center;
            flex-shrink: 0;
        }

        .weight-bar-track {
            flex: 1;
            height: 28px;
            background: var(--bar-track);
            border-radius: 6px;
            position: relative;
        }

        .weight-bar-fill {
            height: 100%;
            border-radius: 6px;
            display: flex;
            align-items: center;
            padding-left: 12px;
            font-size: 0.78em;
            font-weight: 600;
            color: white;
        }

        .weight-pct {
            width: 50px;
            text-align: right;
            font-family: "SF Mono", "Fira Code", Menlo, Consolas, monospace;
            font-size: 0.82em;
            color: var(--text-muted);
            flex-shrink: 0;
        }

        /* Callout */
        .callout {
            border-radius: 10px;
            padding: 18px 22px;
            margin: 20px 0;
            font-size: 0.9em;
            color: var(--text-light);
            line-height: 1.6;
        }

        .callout strong {
            color: var(--text);
        }

        .callout.blue {
            background: var(--callout-blue-bg);
            border-left: 3px solid var(--accent);
        }

        .callout.green {
            background: var(--callout-green-bg);
            border-left: 3px solid var(--green);
        }

        .callout.orange {
            background: var(--callout-orange-bg);
            border-left: 3px solid var(--orange);
        }

        /* Flow diagram */
        .flow {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0;
            margin: 28px 0;
            flex-wrap: wrap;
        }

        .flow-step {
            text-align: center;
            padding: 14px 18px;
            border-radius: 10px;
            font-size: 0.82em;
            font-weight: 600;
            border: 2px solid;
            min-width: 120px;
        }

        .flow-arrow {
            font-size: 1.4em;
            color: var(--text-muted);
            padding: 0 6px;
        }

        .flow-step.purple {
            background: var(--flow-purple-bg);
            border-color: var(--flow-purple-border);
            color: var(--purple);
        }

        .flow-step.blue {
            background: var(--flow-blue-bg);
            border-color: var(--flow-blue-border);
            color: var(--blue);
        }

        .flow-step.green {
            background: var(--flow-green-bg);
            border-color: var(--flow-green-border);
            color: var(--green);
        }

        /* Example table */
        .example-table {
            width: 100%;
            border-collapse: collapse;
            margin: 16px 0;
            font-size: 0.88em;
        }

        .example-table th {
            text-align: left;
            font-weight: 600;
            color: var(--text-muted);
            font-size: 0.78em;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            padding: 10px 12px;
            border-bottom: 2px solid var(--border);
        }

        .example-table td {
            padding: 10px 12px;
            border-bottom: 1px solid var(--border);
            color: var(--text-light);
        }

        .example-table td:first-child {
            font-weight: 600;
            color: var(--text);
        }

        .example-table tr:last-child td {
            border-bottom: none;
        }

        .mono {
            font-family: "SF Mono", "Fira Code", Menlo, Consolas, monospace;
            font-size: 0.92em;
        }

        /* Adjustment visual */
        .adjust-visual {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 16px;
            margin: 24px 0;
            flex-wrap: wrap;
        }

        .adjust-box {
            text-align: center;
            padding: 16px 20px;
            border-radius: 10px;
            min-width: 130px;
        }

        .adjust-box .val {
            font-family: "SF Mono", "Fira Code", Menlo, Consolas, monospace;
            font-size: 1.4em;
            font-weight: 700;
            display: block;
            margin-bottom: 4px;
        }

        .adjust-box .desc {
            font-size: 0.78em;
            color: var(--text-muted);
        }

        .adjust-op {
            font-size: 1.5em;
            font-weight: 700;
            color: var(--text-muted);
        }

        .adjust-box.base {
            background: var(--adjust-base-bg);
        }

        .adjust-box.up {
            background: var(--adjust-up-bg);
            border: 1px solid var(--adjust-up-border);
        }

        .adjust-box.up .val {
            color: var(--green);
        }

        .adjust-box.down {
            background: var(--adjust-down-bg);
            border: 1px solid var(--adjust-down-border);
        }

        .adjust-box.down .val {
            color: var(--red);
        }

        .adjust-box.result {
            background: var(--adjust-result-bg);
            border: 2px solid var(--accent);
        }

        .adjust-box.result .val {
            color: var(--accent);
        }

        /* Divider */
        .divider {
            border: none;
            border-top: 1px solid var(--border);
            margin: 48px 0;
        }

        /* Footer */
        .footer {
            text-align: center;
            font-size: 0.8em;
            color: var(--text-muted);
            border-top: 1px solid var(--border);
            padding-top: 20px;
            margin-top: 48px;
        }

        .footer a {
            color: var(--footer-link);
            font-weight: bold;
            text-decoration: none;
        }

        .footer a:hover {
            text-decoration: underline;
        }

        /* Mobile */
        @media (max-width: 600px) {
            body {
                padding: 8px;
            }

            .container {
                padding: 24px 18px;
                border-radius: 0;
                box-shadow: none;
            }

            h1 {
                font-size: 1.4em;
            }

            .versus {
                grid-template-columns: 1fr;
            }

            .bar-label {
                width: 90px;
                font-size: 0.75em;
            }

            .flow {
                flex-direction: column;
                gap: 0;
            }

            .flow-arrow {
                transform: rotate(90deg);
                padding: 4px 0;
            }

            .adjust-visual {
                flex-direction: column;
                gap: 8px;
            }

            .adjust-op {
                transform: rotate(90deg);
            }

            h2 .icon {
                width: 30px;
                height: 30px;
                font-size: 1em;
                border-radius: 8px;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <button class="theme-toggle" id="theme-toggle">üåô</button>

        <a href="index.html" class="back-link">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor">
                <path fill-rule="evenodd"
                    d="M9.78 4.22a.75.75 0 0 1 0 1.06L7.06 8l2.72 2.72a.75.75 0 1 1-1.06 1.06L5.47 8.53a.75.75 0 0 1 0-1.06l3.25-3.25a.75.75 0 0 1 1.06 0Z" />
            </svg>
            Leaderboard
        </a>
        <span style="color:var(--text-muted); font-size:0.85em; margin: 0 4px 32px;">‚Ä¢</span>
        <a href="climbs.html" class="back-link">Hardest Climbs</a>
        <span style="color:var(--text-muted); font-size:0.85em; margin: 0 4px 32px;">‚Ä¢</span>
        <a href="compare.html" class="back-link">Compare</a>
        <span style="color:var(--text-muted); font-size:0.85em; margin: 0 4px 32px;">‚Ä¢</span>
        <a href="profile.html" class="back-link">Profile</a>

        <h1>How Scoring Works</h1>
        <p class="page-subtitle">
            A plain-language guide to how we rank climbers at Dogpatch Boulders.
            No math degree required.
        </p>

        <!-- TL;DR -->
        <div class="tldr">
            <h3>TL;DR</h3>
            <ol>
                <li>Every climb starts with a base score from its <strong>V-grade</strong> (V0 = 1000, V6 = 1600, V10 = 2000)</li>
                <li>Climbs get <strong>adjusted up or down</strong> based on who actually sends them</li>
                <li>Your score is almost entirely your <strong>single hardest send</strong>, with tiny bonuses for additional climbs</li>
                <li>Only the <strong>last 30 days</strong> count &mdash; you're only as strong as your last month</li>
            </ol>
        </div>

        <!-- ============================================ -->
        <!-- SECTION: The Big Idea -->
        <!-- ============================================ -->
        <div class="section">
            <h2>
                <span class="icon" style="background:var(--icon-bg-blue);">&#x1F3AF;</span>
                The Big Idea
            </h2>
            <p>
                The leaderboard answers one question: <strong>"Who is the strongest climber at Dogpatch right now?"</strong>
            </p>
            <p>
                To answer that fairly, we can't just look at the grade printed on the wall. Everyone knows some V6s are
                sandbagged and others are soft. So we let the <em>community</em> define how hard each climb really is,
                then score you based on that.
            </p>

            <div class="flow">
                <div class="flow-step purple">
                    Climbers define<br>climb difficulty
                </div>
                <span class="flow-arrow">&rarr;</span>
                <div class="flow-step blue">
                    Climb difficulty defines<br>climber scores
                </div>
                <span class="flow-arrow">&rarr;</span>
                <div class="flow-step green">
                    Repeat until<br>scores stabilize
                </div>
            </div>

            <p>
                Strong climbers sending a climb pushes its difficulty rating up. Weaker climbers sending it pulls it down.
                Your score then reflects the <em>actual</em> difficulty of what you've sent, not just what the setter wrote on the tag.
            </p>
        </div>

        <!-- ============================================ -->
        <!-- SECTION: Your Score = Your Hardest Sends -->
        <!-- ============================================ -->
        <div class="section">
            <h2>
                <span class="icon" style="background:var(--icon-bg-green);">&#x1F4AA;</span>
                Your Score = Your Hardest Sends
            </h2>
            <p>
                Your score is a <strong>weighted sum</strong> of your climbs, sorted hardest-first. But the weights
                drop off <em>extremely fast</em> &mdash; your second-best climb is only worth 10% of your best, your third is worth 1%, and so on.
            </p>

            <!-- Weight visualization -->
            <div class="weight-stack">
                <div class="weight-row">
                    <div class="weight-rank">#1</div>
                    <div class="weight-bar-track">
                        <div class="weight-bar-fill" style="width:100%; background: var(--accent);">
                            Hardest send
                        </div>
                    </div>
                    <div class="weight-pct">100%</div>
                </div>
                <div class="weight-row">
                    <div class="weight-rank">#2</div>
                    <div class="weight-bar-track">
                        <div class="weight-bar-fill" style="width:10%; background: var(--accent); opacity:0.8; min-width: 30px;">
                        </div>
                    </div>
                    <div class="weight-pct">10%</div>
                </div>
                <div class="weight-row">
                    <div class="weight-rank">#3</div>
                    <div class="weight-bar-track">
                        <div class="weight-bar-fill" style="width:3%; background: var(--accent); opacity:0.6; min-width: 14px;">
                        </div>
                    </div>
                    <div class="weight-pct">1%</div>
                </div>
                <div class="weight-row">
                    <div class="weight-rank">#4</div>
                    <div class="weight-bar-track">
                        <div class="weight-bar-fill" style="width:2%; background: var(--accent); opacity:0.4; min-width: 8px;">
                        </div>
                    </div>
                    <div class="weight-pct">0.1%</div>
                </div>
                <div class="weight-row">
                    <div class="weight-rank">#5+</div>
                    <div class="weight-bar-track">
                        <div class="weight-bar-fill" style="width:1.5%; background: var(--accent); opacity:0.2; min-width: 4px;">
                        </div>
                    </div>
                    <div class="weight-pct">~0%</div>
                </div>
            </div>

            <p>
                In practice, your score is <em>almost entirely</em> determined by your single hardest send. Additional
                climbs act as tiebreakers &mdash; they nudge your score up slightly, but they can never drag it down.
            </p>

            <div class="callout blue">
                <strong>Why?</strong> We want the leaderboard to reflect peak ability, not gym attendance.
                Logging your warmups will never hurt you, but it won't significantly help either.
                This is similar to how competition redpoint rounds work, but with steeper decay.
            </div>
        </div>

        <!-- ============================================ -->
        <!-- SECTION: Volume Can't Beat Difficulty -->
        <!-- ============================================ -->
        <div class="section">
            <h2>
                <span class="icon" style="background:var(--icon-bg-orange);">&#x1F3CB;</span>
                Volume Can't Beat Difficulty
            </h2>
            <p>
                Here's the key design choice: <strong>no amount of easier climbs can overtake a harder one.</strong>
                Let's see this in action:
            </p>

            <div class="versus">
                <div class="versus-card winner">
                    <div class="label">Winner</div>
                    <div class="climber-name">Climber A</div>
                    <div class="climber-detail">Sent 1 V6</div>
                    <div class="score-display">1,600</div>
                </div>
                <div class="versus-card">
                    <div class="label" style="color: var(--text-muted);">Loses</div>
                    <div class="climber-name">Climber B</div>
                    <div class="climber-detail">Sent 40 V4s</div>
                    <div class="score-display" style="color: var(--text-muted);">~1,555</div>
                </div>
            </div>

            <p>
                Why? Because of the steep 10% decay, Climber B's 40 V4s form a geometric series that
                <em>converges</em> &mdash; it has a mathematical ceiling it can never cross:
            </p>

            <!-- Bar chart showing the convergence -->
            <div class="bar-chart">
                <div class="bar-row">
                    <div class="bar-label"><strong>1 V6</strong></div>
                    <div class="bar-track">
                        <div class="bar-fill" style="width:80%; background: var(--green);"></div>
                    </div>
                    <div class="bar-value">1,600</div>
                </div>
                <div class="bar-row">
                    <div class="bar-label">1 V4</div>
                    <div class="bar-track">
                        <div class="bar-fill" style="width:70%; background: var(--blue);"></div>
                    </div>
                    <div class="bar-value">1,400</div>
                </div>
                <div class="bar-row">
                    <div class="bar-label">5 V4s</div>
                    <div class="bar-track">
                        <div class="bar-fill" style="width:75.5%; background: var(--blue);"></div>
                    </div>
                    <div class="bar-value">1,555</div>
                </div>
                <div class="bar-row">
                    <div class="bar-label">40 V4s</div>
                    <div class="bar-track">
                        <div class="bar-fill" style="width:75.5%; background: var(--blue);"></div>
                    </div>
                    <div class="bar-value">~1,555</div>
                </div>
                <div class="bar-row">
                    <div class="bar-label" style="font-style:italic;">Infinite V4s</div>
                    <div class="bar-track">
                        <div class="bar-fill" style="width:75.5%; background: var(--blue); opacity: 0.6;"></div>
                    </div>
                    <div class="bar-value">1,555</div>
                </div>
            </div>

            <div class="callout orange">
                <strong>The math ceiling:</strong> With a 10% decay factor, your maximum possible score from
                infinite sends of the same grade is capped at <strong>~1.11x</strong> the value of a single send
                at that grade. 40 V4s and infinite V4s produce nearly identical scores.
            </div>
        </div>

        <!-- ============================================ -->
        <!-- SECTION: Not All V6s Are Equal -->
        <!-- ============================================ -->
        <div class="section">
            <h2>
                <span class="icon" style="background:var(--icon-bg-purple);">&#x2696;&#xFE0F;</span>
                Not All V6s Are Equal
            </h2>
            <p>
                You already know this intuitively: that one black V6 in the corner feels way harder
                than the popular pink V6 everyone warms up on. Our system captures this.
            </p>
            <p>
                Each climb's rating starts at its posted grade, then gets adjusted based on <strong>who sends it</strong>
                and <strong>how many people</strong> send it.
            </p>

            <h3>How a "popular" V6 loses points</h3>
            <p>
                If a V6 is getting sent by lots of V4 and V5 climbers, the system recognizes it's probably softer than a
                true V6. The climb's effective rating gets pulled down toward the average strength of its senders.
            </p>

            <div class="adjust-visual">
                <div class="adjust-box base">
                    <span class="val">1,600</span>
                    <span class="desc">V6 base</span>
                </div>
                <span class="adjust-op">+</span>
                <div class="adjust-box down">
                    <span class="val">&minus;50</span>
                    <span class="desc">Weak senders pull it down</span>
                </div>
                <span class="adjust-op">+</span>
                <div class="adjust-box down">
                    <span class="val">&minus;5</span>
                    <span class="desc">Low scarcity (many sends)</span>
                </div>
                <span class="adjust-op">=</span>
                <div class="adjust-box result">
                    <span class="val">~1,545</span>
                    <span class="desc">Effective rating</span>
                </div>
            </div>

            <h3>How a "hard" V6 gains points</h3>
            <p>
                If a V6 is only being sent by V7+ climbers, and very few people have sent it, the system
                recognizes it's probably harder than average. The climb's rating rises.
            </p>

            <div class="adjust-visual">
                <div class="adjust-box base">
                    <span class="val">1,600</span>
                    <span class="desc">V6 base</span>
                </div>
                <span class="adjust-op">+</span>
                <div class="adjust-box up">
                    <span class="val">+50</span>
                    <span class="desc">Strong senders push it up</span>
                </div>
                <span class="adjust-op">+</span>
                <div class="adjust-box up">
                    <span class="val">+33</span>
                    <span class="desc">High scarcity (few sends)</span>
                </div>
                <span class="adjust-op">=</span>
                <div class="adjust-box result">
                    <span class="val">~1,683</span>
                    <span class="desc">Effective rating</span>
                </div>
            </div>

            <p>
                So if you send that "hard" V6 instead of the "popular" V6, you'll earn
                <strong>~138 more points</strong> &mdash; roughly the same as the difference between an
                entire V-grade.
            </p>

            <div class="callout blue">
                <strong>The elasticity knob:</strong> We use a 50/50 blend between the posted grade and what
                the community says. This means the setter's grade still matters &mdash; a V6 can't suddenly
                become a V10 &mdash; but it can float up or down within a reasonable range.
            </div>
        </div>

        <!-- ============================================ -->
        <!-- SECTION: Scarcity Rewards -->
        <!-- ============================================ -->
        <div class="section">
            <h2>
                <span class="icon" style="background:var(--icon-bg-red);">&#x1F48E;</span>
                Rare Climbs Are Worth More
            </h2>
            <p>
                Climbs that fewer people have sent receive a small bonus. This rewards climbers who go after
                the less-traveled problems instead of just doing the popular circuit.
            </p>

            <div class="bar-chart">
                <div class="bar-row">
                    <div class="bar-label">1 sender</div>
                    <div class="bar-track">
                        <div class="bar-fill" style="width:100%; background: var(--purple);">+33 pts</div>
                    </div>
                    <div class="bar-value">+33</div>
                </div>
                <div class="bar-row">
                    <div class="bar-label">3 senders</div>
                    <div class="bar-track">
                        <div class="bar-fill" style="width:55%; background: var(--purple);">+18 pts</div>
                    </div>
                    <div class="bar-value">+18</div>
                </div>
                <div class="bar-row">
                    <div class="bar-label">5 senders</div>
                    <div class="bar-track">
                        <div class="bar-fill" style="width:42%; background: var(--purple);">+14 pts</div>
                    </div>
                    <div class="bar-value">+14</div>
                </div>
                <div class="bar-row">
                    <div class="bar-label">10 senders</div>
                    <div class="bar-track">
                        <div class="bar-fill" style="width:30%; background: var(--purple);">+10 pts</div>
                    </div>
                    <div class="bar-value">+10</div>
                </div>
                <div class="bar-row">
                    <div class="bar-label">50 senders</div>
                    <div class="bar-track">
                        <div class="bar-fill" style="width:10%; background: var(--purple);"></div>
                    </div>
                    <div class="bar-value">+3</div>
                </div>
            </div>

            <p>
                The bonus follows a logarithmic curve &mdash; the difference between 1 and 2 senders is significant,
                but the difference between 50 and 51 is negligible. This matches how rarity feels in practice.
            </p>
        </div>

        <!-- ============================================ -->
        <!-- SECTION: Putting It All Together -->
        <!-- ============================================ -->
        <div class="section">
            <h2>
                <span class="icon" style="background:var(--icon-bg-blue);">&#x1F9E9;</span>
                Putting It All Together
            </h2>
            <p>
                Let's walk through a full example with three climbers to see how everything combines.
            </p>

            <table class="example-table">
                <thead>
                    <tr>
                        <th>Climber</th>
                        <th>Sends (last 30 days)</th>
                        <th>Hardest</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>The Crusher</td>
                        <td>1 hard V8, 2 V5s</td>
                        <td class="mono">V8</td>
                    </tr>
                    <tr>
                        <td>The All-Rounder</td>
                        <td>1 hard V6, 3 V5s, 5 V4s</td>
                        <td class="mono">V6</td>
                    </tr>
                    <tr>
                        <td>The Volume Machine</td>
                        <td>40 V4s, 1 popular V6</td>
                        <td class="mono">V6</td>
                    </tr>
                </tbody>
            </table>

            <p><strong>Step 1:</strong> Start with base grades (V4 = 1400, V5 = 1500, V6 = 1600, V8 = 1800).</p>
            <p><strong>Step 2:</strong> Adjust climb ratings based on senders. The "hard" V8 stays near 1800+. The "popular" V6 drops because weaker climbers also sent it. The "hard" V6 stays high.</p>
            <p><strong>Step 3:</strong> Calculate each climber's score using the weighted sum:</p>

            <div class="bar-chart">
                <div class="bar-row">
                    <div class="bar-label"><strong>The Crusher</strong><br><span style="font-size:0.85em; color:var(--text-muted);">1 hard V8 + 2 V5s</span></div>
                    <div class="bar-track">
                        <div class="bar-fill" style="width:92%; background: var(--green);"></div>
                    </div>
                    <div class="bar-value">~1,850</div>
                </div>
                <div class="bar-row">
                    <div class="bar-label"><strong>The All-Rounder</strong><br><span style="font-size:0.85em; color:var(--text-muted);">1 hard V6 + pyramid</span></div>
                    <div class="bar-track">
                        <div class="bar-fill" style="width:83%; background: var(--blue);"></div>
                    </div>
                    <div class="bar-value">~1,665</div>
                </div>
                <div class="bar-row">
                    <div class="bar-label"><strong>The Volume Machine</strong><br><span style="font-size:0.85em; color:var(--text-muted);">40 V4s + 1 soft V6</span></div>
                    <div class="bar-track">
                        <div class="bar-fill" style="width:79%; background: var(--orange);"></div>
                    </div>
                    <div class="bar-value">~1,590</div>
                </div>
            </div>

            <p>
                Notice how The All-Rounder beats The Volume Machine even though The Volume Machine logged
                way more climbs. The All-Rounder's "hard" V6 is worth more than the "popular" V6 that
                everyone sends.
            </p>
        </div>

        <!-- ============================================ -->
        <!-- SECTION: The Iterative Loop -->
        <!-- ============================================ -->
        <div class="section">
            <h2>
                <span class="icon" style="background:var(--icon-bg-neutral);">&#x1F504;</span>
                The Chicken-and-Egg Problem
            </h2>
            <p>
                You might have noticed a circular dependency: we need to know how strong climbers are to rate climbs,
                but we need to know how hard climbs are to rate climbers.
            </p>
            <p>
                We solve this by <strong>iterating</strong>. Start with a rough guess (everyone's rating = their max grade),
                then alternate between updating climb ratings and climber ratings, 5 times. By the 3rd or 4th pass,
                scores have usually stabilized.
            </p>

            <table class="example-table">
                <thead>
                    <tr>
                        <th>Pass</th>
                        <th>What happens</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Start</td>
                        <td>Everyone's rating = their max V-grade in points</td>
                    </tr>
                    <tr>
                        <td>Pass 1</td>
                        <td>Climbs adjust based on initial climber ratings. Climbers re-scored.</td>
                    </tr>
                    <tr>
                        <td>Pass 2</td>
                        <td>Climbs adjust again with updated climber ratings. Scores refine further.</td>
                    </tr>
                    <tr>
                        <td>Pass 3-5</td>
                        <td>Fine-tuning. Scores converge to stable values.</td>
                    </tr>
                </tbody>
            </table>

            <div class="callout green">
                <strong>What this catches:</strong> Sandbagged grades (labeled easy but actually hard) get
                corrected upward because strong climbers send them. Soft grades (labeled hard but widely sent)
                get corrected downward because weaker climbers complete them. The system is self-correcting.
            </div>
        </div>

        <!-- ============================================ -->
        <!-- SECTION: 30-Day Window -->
        <!-- ============================================ -->
        <div class="section">
            <h2>
                <span class="icon" style="background:var(--icon-bg-blue);">&#x1F4C5;</span>
                The 30-Day Window
            </h2>
            <p>
                Only sends from the <strong>last 30 days</strong> count toward your score. Climbed a V10 two months ago?
                Great, but it won't show up on the leaderboard. This keeps the ranking fresh and rewards
                current form over historical achievements.
            </p>
            <p>
                Think of it as a rolling monthly competition. Everyone starts from scratch each month.
            </p>
        </div>

        <!-- ============================================ -->
        <!-- SECTION: Movement Tracking -->
        <!-- ============================================ -->
        <div class="section">
            <h2>
                <span class="icon" style="background:var(--icon-bg-orange);">&#x1F4C8;</span>
                Movement Tracking
            </h2>
            <p>
                Each daily update compares your current rank to your previous rank:
            </p>
            <table class="example-table">
                <thead>
                    <tr>
                        <th>Symbol</th>
                        <th>Meaning</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><span style="color: var(--green); font-weight: bold;">&#9650; 3</span></td>
                        <td>You moved up 3 spots since last update</td>
                    </tr>
                    <tr>
                        <td><span style="color: var(--red); font-weight: bold;">&#9660; 2</span></td>
                        <td>You dropped 2 spots since last update</td>
                    </tr>
                    <tr>
                        <td><span style="color: var(--text-muted);">-</span></td>
                        <td>No change</td>
                    </tr>
                    <tr>
                        <td><span style="color: var(--orange); font-weight: bold; background: var(--new-badge-bg); padding: 2px 8px; border-radius: 4px; font-size: 0.85em;">NEW</span></td>
                        <td>First time appearing on the leaderboard</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <hr class="divider">

        <!-- ============================================ -->
        <!-- SECTION: Design Principles -->
        <!-- ============================================ -->
        <div class="section">
            <h2>Design Principles</h2>
            <p>Three principles guided every decision:</p>

            <div class="callout blue" style="margin-bottom: 12px;">
                <strong>Peak performance matters most.</strong>
                Your hardest send should be what defines your ranking. Volume is a tiebreaker, not
                a replacement for difficulty.
            </div>

            <div class="callout green" style="margin-bottom: 12px;">
                <strong>Grades are imperfect &mdash; the community corrects them.</strong>
                Posted grades are a starting point. The iterative solver uses the community's sending
                patterns to surface the actual difficulty of each climb.
            </div>

            <div class="callout orange">
                <strong>Recency keeps it fair.</strong>
                A 30-day rolling window ensures the leaderboard reflects current form.
                Everyone gets a fresh start each month.
            </div>
        </div>

        <!-- ============================================ -->
        <!-- Technical Details (Collapsed) -->
        <!-- ============================================ -->
        <div class="section">
            <h2>
                <span class="icon" style="background:var(--icon-bg-neutral);">&#x2699;&#xFE0F;</span>
                Technical Details
            </h2>
            <p>For those who want the exact formulas and parameters.</p>

            <h3>Parameters</h3>
            <table class="example-table">
                <thead>
                    <tr>
                        <th>Parameter</th>
                        <th>Value</th>
                        <th>What it does</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="mono">Base Points</td>
                        <td class="mono">1000 + (grade &times; 100)</td>
                        <td>V0 = 1000, V6 = 1600, V10 = 2000</td>
                    </tr>
                    <tr>
                        <td class="mono">Elasticity</td>
                        <td class="mono">0.5</td>
                        <td>50/50 blend of posted grade vs. community signal</td>
                    </tr>
                    <tr>
                        <td class="mono">Scarcity Weight</td>
                        <td class="mono">50</td>
                        <td>Max bonus points for rarely-sent climbs</td>
                    </tr>
                    <tr>
                        <td class="mono">Volume Decay</td>
                        <td class="mono">0.1</td>
                        <td>Each subsequent send is worth 10% of the previous</td>
                    </tr>
                    <tr>
                        <td class="mono">Iterations</td>
                        <td class="mono">5</td>
                        <td>Number of refinement passes</td>
                    </tr>
                    <tr>
                        <td class="mono">Window</td>
                        <td class="mono">30 days</td>
                        <td>Rolling time period for eligible sends</td>
                    </tr>
                </tbody>
            </table>

            <h3>Climb Rating Formula</h3>
            <p>
                For each climb, the effective rating is recalculated each pass:
            </p>
            <div class="callout blue" style="font-family: 'SF Mono', 'Fira Code', Menlo, Consolas, monospace; font-size: 0.85em; line-height: 1.8;">
                climb_rating = base_points + 0.5 &times; (avg_sender_rating &minus; base_points) + scarcity_bonus
                <br>
                <span style="color: var(--text-muted); font-style: italic;">scarcity_bonus = 50 &times; (1 / ln(num_senders + 1.1))</span>
            </div>

            <h3>Climber Score Formula</h3>
            <p>
                Sends are sorted by climb rating (highest first), then summed with geometric decay:
            </p>
            <div class="callout blue" style="font-family: 'SF Mono', 'Fira Code', Menlo, Consolas, monospace; font-size: 0.85em; line-height: 1.8;">
                score = climb_1 &times; 1.0 + climb_2 &times; 0.1 + climb_3 &times; 0.01 + climb_4 &times; 0.001 + ...
                <br>
                <span style="color: var(--text-muted); font-style: italic;">weight for send #i = 0.1<sup>(i&minus;1)</sup>, capped at top 11 sends</span>
            </div>
        </div>

        <div class="footer">
            Created by <a href="https://github.com/danicrg" target="_blank">danicrg</a>
        </div>

    </div>

    <script>
        (function initTheme() {
            const saved = localStorage.getItem('theme');
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            if (saved === 'dark' || (!saved && prefersDark))
                document.documentElement.setAttribute('data-theme', 'dark');
        })();
        document.getElementById('theme-toggle').addEventListener('click', () => {
            const isDark = document.documentElement.getAttribute('data-theme') === 'dark';
            document.documentElement.setAttribute('data-theme', isDark ? 'light' : 'dark');
            localStorage.setItem('theme', isDark ? 'light' : 'dark');
            document.getElementById('theme-toggle').textContent = isDark ? 'üåô' : '‚òÄÔ∏è';
        });
        document.getElementById('theme-toggle').textContent =
            document.documentElement.getAttribute('data-theme') === 'dark' ? '‚òÄÔ∏è' : 'üåô';
    </script>
</body>

</html>
